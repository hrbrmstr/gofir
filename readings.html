<!DOCTYPE html>
<html lang="en">

<head>
  <title>Weatherflow Tempest Weather</title>
  <meta charset="utf-8">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="color-scheme" content="dark light">
  <meta name="description" content="Wx station" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <script defer src="https://unpkg.com/@livefir/fir@latest/dist/fir.min.js"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    section {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .flex-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      z-index: 1000;
      visibility: visible;
      gap: 20px;         /* This creates the margins between boxes */
      padding: 20px;     /* This creates padding around the container */
      width: 90vw;       /* This makes the container fill 90% of the viewport width */
      max-width: 1200px; /* This sets a maximum width for the container */
    }

    .station-bar {
      position: fixed;      /* Makes the div stay in place */
      bottom: 0;            /* Aligns the div to the bottom of the window */
      left: 0;              /* Aligns the div to the left of the window */
      width: 100%;          /* Ensures the div spans the full width of the window */
      height: 50px;         /* Adjust the height as needed */
      text-align: center;   /* Centers the text inside the status bar */
      line-height: 50px;    /* Vertically centers the text (should match height) */
      padding-bottom: 10px;
      font-family: 'Space Mono', monospace;
    }

    .hub-bar {
      position: fixed;    /* Makes the div stay in place */
      top: 0;             /* Aligns the div to the top of the window */
      left: 0;            /* Aligns the div to the left of the window */
      width: 100%;        /* Ensures the div spans the full width of the window */
      height: 50px;       /* Adjust the height as needed */
      text-align: center; /* Centers the text inside the status bar */
      line-height: 50px;  /* Vertically centers the text (should match height) */
      font-family: 'Space Mono', monospace;
      font-size: 9pt;
    }

    tempest-bar {
      min-width: 140px;
      min-height: 140px;
    }

    @media (prefers-color-scheme: light) {
      .flex-item {
        border: 1px solid black;
      }
    }
  </style>
</head>

<body>
  <div x-data>
    <div @fir:reading:ok::readings-update.window="$fir.replace()">
      {{ block "readings-update" . }}
      <div class="station-bar">
        <tempest-status serial="{{ .serial }}" batt="{{ .batt }}" when="{{ .when }}" path="/prefs"></tempest-status>
      </div>
      <section style="border: 1px solid transparent;">
        <div class="flex-container" id="weather-data">
          <tempest-reading id="temp" title="Temperature" reading='{{ .temp  }}'></tempest-reading>
          <tempest-reading id="humid" title="Humidity" reading='{{ .humid }}'></tempest-reading>
          <tempest-reading id="press" title="Pressure" reading='{{ .press }}'></tempest-reading>
          <tempest-reading id="lumos" title="Illuminance" reading='{{ .lumos }}'></tempest-reading>
          <tempest-reading id="insol" title="Insolation" reading='{{ .insol }}'></tempest-reading>
          <tempest-reading id="ultra" title="U/V Index" reading='{{ .ultra }}'></tempest-reading>
          <tempest-reading id="wind" title="Wind Avg." reading='{{ .wind  }}'></tempest-reading>
          <tempest-reading id="wdir" title="Whence" reading='{{ .wdir  }}'></tempest-reading>
        </div>
      </section>
      {{ end }}
    </div>
    <div class="hub-bar" @fir:hub:ok::hub-update.window="$fir.replace()">
      {{ block "hub-update" . }}
      <hub-status serial="{{ .hubsn }}" uptime="{{ .uptime }}" firmware="{{ .hubfirm }}" path="/charts"></hub-status>
      {{ end }}
    </div>
  </div>

  <script type="module">

    import { LitElement, html, css, unsafeHTML, unsafeSVG } from 'https://cdn.jsdelivr.net/gh/lit/dist@3/all/lit-all.min.js';
    import { default as humanizeDuration } from 'https://cdn.jsdelivr.net/npm/humanize-duration@3.31.0/+esm';

    class HubStatus extends LitElement {

      static styles = css`
        .gear {
          text-decoration: none;
          font-size: 1.2em;
        }
        a.gear:link, a.gear:visited, a.gear:hover, a.gear:active {
          color: white;
        }
        @media (prefers-color-scheme: light) {
          a.gear:link, a.gear:visited, a.gear:hover, a.gear:active {
            color: black;
          }
        }`

      static get properties() {
        return {
          serial: { type: String },
          uptime: { type: String },
          firmware: { type: String },
          path: { type: String }
        }
      }

      constructor() {
        super();
        this.serial = ""
        this.uptime = ""
        this.firmware = ""
        this.path = ""
      }

      render() {
        return html`
üì° ${this.serial} ‚Ä¢ ${humanizeDuration(1000 * +this.uptime)} ‚Ä¢ v.${this.firmware} ‚Ä¢ <a class="gear" href="${window.location.href.replace(/\/$/, "")}${this.path}">üìà</a>
`
      }
    }
    customElements.define('hub-status', HubStatus);

    class TempestStatus extends LitElement {

      static styles = css`
        .gear {
          text-decoration: none;
          font-size: 1.2em;
        }
        a.gear:link, a.gear:visited, a.gear:hover, a.gear:active {
          color: white;
        }
        @media (prefers-color-scheme: light) {
          a.gear:link, a.gear:visited, a.gear:hover, a.gear:active {
            color: black;
          }
        }`

      static get properties() {
        return {
          serial: { type: String },
          batt: { type: String },
          when: { type: String },
          path: { type: String }
        }
      }

      constructor() {
        super();
        this.serial = ""
        this.batt = ""
        this.when = ""
        this.path = ""
      }

      render() {
        return html`
<p>üõ∞Ô∏è ${this.serial} ‚Ä¢ üîã ${this.batt} ‚Ä¢ üïë ${this.when} ‚Ä¢ <a class="gear" href="${window.location.href.replace(/\/$/, "")}${this.path}">‚öôÔ∏è</a></p>
`
      }
    }
    customElements.define('tempest-status', TempestStatus);

    const svgtrans = {
      'temp': `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="9.47656" height="13.6484"> <style> path {fill: #000000; } @media (prefers-color-scheme: dark) {path {fill: #ffffff; } } </style> <g> <rect height="13.6484" opacity="0" width="9.47656" x="0" y="0" /> <path d="M7.72656 2.27344L9.07812 2.27344C9.32031 2.27344 9.47656 2.08594 9.47656 1.86719C9.47656 1.65625 9.32031 1.46875 9.07812 1.46875L7.72656 1.46875C7.48438 1.46875 7.32031 1.65625 7.32031 1.86719C7.32031 2.08594 7.48438 2.27344 7.72656 2.27344ZM7.72656 3.99219L9.07812 3.99219C9.32031 3.99219 9.47656 3.80469 9.47656 3.58594C9.47656 3.375 9.32031 3.1875 9.07812 3.1875L7.72656 3.1875C7.48438 3.1875 7.32031 3.375 7.32031 3.58594C7.32031 3.80469 7.48438 3.99219 7.72656 3.99219ZM7.72656 5.71094L9.07812 5.71094C9.32031 5.71094 9.47656 5.52344 9.47656 5.30469C9.47656 5.09375 9.32031 4.90625 9.07812 4.90625L7.72656 4.90625C7.48438 4.90625 7.32031 5.09375 7.32031 5.30469C7.32031 5.52344 7.48438 5.71094 7.72656 5.71094ZM7.72656 7.42969L9.07812 7.42969C9.32031 7.42969 9.47656 7.24219 9.47656 7.02344C9.47656 6.8125 9.32031 6.625 9.07812 6.625L7.72656 6.625C7.48438 6.625 7.32031 6.8125 7.32031 7.02344C7.32031 7.24219 7.48438 7.42969 7.72656 7.42969Z" fill-opacity="0.85" /> <path d="M4.53906 13.6328C6.33594 13.6328 7.79688 12.1719 7.79688 10.375C7.79688 9.42969 7.40625 8.60156 6.67969 7.92969C6.55469 7.8125 6.53125 7.75 6.53125 7.58594L6.53906 2.17969C6.53906 0.875 5.72656 0 4.53906 0C3.34375 0 2.53125 0.875 2.53125 2.17969L2.53125 7.58594C2.53125 7.75 2.50781 7.8125 2.39062 7.92969C1.66406 8.60156 1.27344 9.42969 1.27344 10.375C1.27344 12.1719 2.73438 13.6328 4.53906 13.6328ZM4.53906 12.6172C3.29688 12.6172 2.29688 11.6094 2.29688 10.375C2.29688 9.61719 2.66406 8.92969 3.30469 8.50781C3.48438 8.39062 3.55469 8.28906 3.55469 8.04688L3.55469 2.22656C3.55469 1.5 3.95312 1.02344 4.53906 1.02344C5.11719 1.02344 5.50781 1.5 5.50781 2.22656L5.50781 8.04688C5.50781 8.28906 5.58594 8.39062 5.76562 8.50781C6.39844 8.92969 6.77344 9.61719 6.77344 10.375C6.77344 11.6094 5.77344 12.6172 4.53906 12.6172Z" fill-opacity="0.85" /> <path d="M4.53125 11.7891C5.32031 11.7891 5.95312 11.1562 5.95312 10.3672C5.95312 9.82031 5.64062 9.36719 5.19531 9.125C5 9.01562 4.9375 8.94531 4.9375 8.66406L4.9375 2.07031C4.9375 1.77344 4.75781 1.59375 4.53125 1.59375C4.3125 1.59375 4.13281 1.77344 4.13281 2.07031L4.13281 8.66406C4.13281 8.94531 4.07031 9.01562 3.875 9.125C3.42188 9.36719 3.11719 9.82031 3.11719 10.3672C3.11719 11.1562 3.75 11.7891 4.53125 11.7891Z" fill-opacity="0.85" /> </g> </svg>`,
      'humid': `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="15.9531" height="13.3672"> <style> path {fill: #000000; } @media (prefers-color-scheme: dark) {path {fill: #ffffff; } } </style> <g> <rect height="13.3672" opacity="0" width="15.9531" x="0" y="0" /> <path d="M8.80469 9.85156L8.8112 9.97892C7.42334 10.662 6.16797 11.6797 4.32812 11.6797C3.54688 11.6797 2.8125 11.4844 2.125 11.0859C1.74219 10.8672 1.72656 10.4844 1.89062 10.2344C2.03125 10.0156 2.32031 9.89844 2.60938 10.0703C3.23438 10.4297 3.75781 10.5547 4.32812 10.5547C6.15385 10.5547 7.40849 9.38081 8.98958 8.70859C8.87884 9.06889 8.80469 9.45443 8.80469 9.85156Z" fill-opacity="0.85" /> <path d="M10.193 6.18958C8.16504 6.63741 6.75619 8.39844 4.33594 8.39844C3.55469 8.39844 2.82031 8.20312 2.13281 7.80469C1.74219 7.58594 1.73438 7.20312 1.89844 6.95312C2.03906 6.73438 2.32031 6.61719 2.61719 6.78906C3.24219 7.14844 3.76562 7.27344 4.33594 7.27344C6.80846 7.27344 8.23361 5.12048 10.8398 4.97553Z" fill-opacity="0.85" /> <path d="M13.3125 2.27344C13.7109 2.50781 13.7266 2.89062 13.5547 3.13281C13.4062 3.34375 13.125 3.46094 12.8359 3.28906C12.2109 2.92969 11.6875 2.80469 11.1172 2.80469C8.54688 2.80469 7.10156 5.11719 4.32812 5.11719C3.54688 5.11719 2.8125 4.92188 2.125 4.52344C1.74219 4.30469 1.72656 3.92188 1.89062 3.67188C2.03125 3.45312 2.32031 3.33594 2.60938 3.50781C3.23438 3.86719 3.75781 3.99219 4.32812 3.99219C6.89062 3.99219 8.32812 1.67969 11.1172 1.67969C11.8984 1.67969 12.625 1.875 13.3125 2.27344Z" fill-opacity="0.85" /> <path d="M12.375 12.4531C13.8594 12.4531 15.0469 11.2891 15.0469 9.85156C15.0469 9.05469 14.6484 8.27344 14.3125 7.64844L12.9688 5.15625C12.8125 4.85938 12.6719 4.72656 12.375 4.72656C12.0781 4.72656 11.9375 4.85938 11.7812 5.15625L10.4453 7.64844C10.1172 8.27344 9.71875 9.05469 9.71875 9.85156C9.71875 11.2891 10.9062 12.4531 12.375 12.4531Z" fill-opacity="0.85" /> </g>`,
      'press': `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="13.0234" height="12.6172"> <style> path {fill: #000000; } @media (prefers-color-scheme: dark) {path {fill: #ffffff; } } </style> <g> <rect height="12.6172" opacity="0" width="13.0234" x="0" y="0" /> <path d="M6.30469 12.6094C9.75 12.6094 12.6172 9.75 12.6172 6.30469C12.6172 2.85938 9.74219 0 6.29688 0C2.85938 0 0 2.85938 0 6.30469C0 9.75 2.86719 12.6094 6.30469 12.6094ZM6.30469 11.4219C3.46875 11.4219 1.20312 9.14844 1.20312 6.30469C1.20312 3.46094 3.46094 1.1875 6.29688 1.1875C9.14062 1.1875 11.4219 3.46094 11.4219 6.30469C11.4219 9.14844 9.14844 11.4219 6.30469 11.4219Z" fill-opacity="0.85" /> <path d="M6.28906 7.72656C7.07031 7.72656 7.71094 7.09375 7.71094 6.30469C7.71094 5.51562 7.07031 4.88281 6.28906 4.88281C5.5 4.88281 4.85938 5.51562 4.85938 6.30469C4.85938 7.09375 5.5 7.72656 6.28906 7.72656ZM6.28906 6.85938C5.97656 6.85938 5.72656 6.61719 5.72656 6.30469C5.72656 5.99219 5.97656 5.75 6.28906 5.75C6.59375 5.75 6.84375 5.99219 6.84375 6.30469C6.84375 6.61719 6.59375 6.85938 6.28906 6.85938ZM6.0625 7.34375L5.26562 6.54688L4.30469 7.51562C4.08594 7.72656 4.08594 8.09375 4.30469 8.30469C4.52344 8.52344 4.88281 8.52344 5.10156 8.30469ZM6.53906 5.28125L7.34375 6.07031L9.44531 3.96094C9.66406 3.74219 9.66406 3.38281 9.44531 3.16406C9.22656 2.94531 8.86719 2.94531 8.64844 3.16406Z" fill-opacity="0.85" /> </g> </svg>`,
      'lumos': `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="15.7969" height="8.61719"> <style> path {fill: #000000; } @media (prefers-color-scheme: dark) {path {fill: #ffffff; } } </style> <g> <rect height="8.61719" opacity="0" width="15.7969" x="0" y="0" /> <path d="M0.617188 8.32031L2.50781 8.32031C2.85938 8.32031 3.14062 8.03906 3.14062 7.69531C3.14062 7.35938 2.85156 7.07812 2.50781 7.07812L0.617188 7.07812C0.289062 7.07812 0 7.35938 0 7.69531C0 8.03125 0.289062 8.32031 0.617188 8.32031ZM4.39844 4.41406C4.64062 4.17969 4.63281 3.78125 4.39844 3.53906L3.07031 2.19531C2.83594 1.96094 2.42188 1.95312 2.1875 2.1875C1.95312 2.42969 1.95312 2.82812 2.1875 3.07031L3.51562 4.41406C3.75 4.65625 4.16406 4.65625 4.39844 4.41406ZM7.69531 3.13281C8.03125 3.13281 8.32031 2.84375 8.32031 2.51562L8.32031 0.625C8.32031 0.28125 8.03125 0 7.69531 0C7.35938 0 7.07031 0.28125 7.07031 0.625L7.07031 2.51562C7.07031 2.84375 7.35938 3.13281 7.69531 3.13281ZM10.9922 4.41406C11.2266 4.65625 11.6328 4.65625 11.8672 4.41406L13.1953 3.07031C13.4375 2.82812 13.4375 2.42969 13.1953 2.1875C12.9609 1.95312 12.5547 1.96094 12.3203 2.19531L10.9922 3.53906C10.75 3.78125 10.75 4.17969 10.9922 4.41406ZM12.875 8.32031L14.7734 8.32031C15.1016 8.32031 15.3906 8.03125 15.3906 7.69531C15.3906 7.35938 15.1016 7.07812 14.7734 7.07812L12.875 7.07812C12.5391 7.07812 12.25 7.35938 12.25 7.69531C12.25 8.03906 12.5312 8.32031 12.875 8.32031Z" fill-opacity="0.85" /> <path d="M5.39844 8.32812L9.99219 8.32812C10.3359 8.32812 10.6328 8.04688 10.6328 7.70312C10.6328 7.36719 10.3438 7.08594 9.99219 7.08594L5.39844 7.08594C5.03906 7.08594 4.75781 7.36719 4.75781 7.70312C4.75781 8.04688 5.04688 8.32812 5.39844 8.32812Z" fill-opacity="0.85" /> </g>`,
      'insol': `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="13.0234" height="12.6172"> <style> path {fill: #000000; } @media (prefers-color-scheme: dark) {path {fill: #ffffff; } } </style> <g> <rect height="12.6172" opacity="0" width="13.0234" x="0" y="0" /> <path d="M6.30469 12.6094C9.75 12.6094 12.6172 9.75 12.6172 6.30469C12.6172 2.85938 9.74219 0 6.29688 0C2.85938 0 0 2.85938 0 6.30469C0 9.75 2.86719 12.6094 6.30469 12.6094ZM6.30469 11.4219C3.46875 11.4219 1.20312 9.14844 1.20312 6.30469C1.20312 3.46094 3.46094 1.1875 6.29688 1.1875C9.14062 1.1875 11.4219 3.46094 11.4219 6.30469C11.4219 9.14844 9.14844 11.4219 6.30469 11.4219Z" fill-opacity="0.85" /> <path d="M6.29688 8.1875C7.32812 8.1875 8.17188 7.32812 8.17188 6.30469C8.17188 5.27344 7.32812 4.42188 6.29688 4.42188C5.27344 4.42188 4.42188 5.27344 4.42188 6.30469C4.42188 7.32812 5.27344 8.1875 6.29688 8.1875ZM6.29688 2.44531C6.07031 2.44531 5.875 2.64062 5.875 2.86719L5.875 3.57812C5.875 3.80469 6.07031 4 6.29688 4C6.52344 4 6.72656 3.80469 6.72656 3.57812L6.72656 2.86719C6.72656 2.64062 6.52344 2.44531 6.29688 2.44531ZM9.03125 3.57812C8.85938 3.40625 8.58594 3.41406 8.42969 3.57812L7.92969 4.08594C7.76562 4.25781 7.76562 4.52344 7.92969 4.67969C8.08594 4.84375 8.35938 4.84375 8.52344 4.67969L9.03125 4.17188C9.1875 4.01562 9.1875 3.74219 9.03125 3.57812ZM10.1406 6.30469C10.1406 6.07031 9.95312 5.88281 9.72656 5.88281L9.02344 5.88281C8.79688 5.88281 8.60156 6.07812 8.60156 6.30469C8.60156 6.53125 8.79688 6.72656 9.02344 6.72656L9.72656 6.72656C9.95312 6.72656 10.1406 6.53906 10.1406 6.30469ZM9.03125 9.03125C9.19531 8.85938 9.1875 8.58594 9.03125 8.4375L8.51562 7.92969C8.35938 7.77344 8.08594 7.77344 7.92969 7.92969C7.75781 8.09375 7.76562 8.35938 7.92969 8.52344L8.42969 9.03125C8.59375 9.19531 8.85938 9.19531 9.03125 9.03125ZM6.29688 10.1641C6.52344 10.1641 6.72656 9.96094 6.72656 9.73438L6.72656 9.03125C6.72656 8.80469 6.52344 8.60938 6.29688 8.60938C6.07031 8.60938 5.875 8.80469 5.875 9.03125L5.875 9.73438C5.875 9.96094 6.07031 10.1641 6.29688 10.1641ZM3.57031 9.02344C3.73438 9.19531 4.00781 9.19531 4.16406 9.03125L4.67188 8.53125C4.82812 8.36719 4.82812 8.10156 4.67188 7.92969C4.51562 7.77344 4.23438 7.77344 4.07812 7.92969L3.57031 8.4375C3.41406 8.59375 3.41406 8.85938 3.57031 9.02344ZM2.46094 6.30469C2.46094 6.53906 2.64844 6.72656 2.875 6.72656L3.57812 6.72656C3.80469 6.72656 4 6.53125 4 6.30469C4 6.07812 3.80469 5.88281 3.57812 5.88281L2.875 5.88281C2.64844 5.88281 2.46094 6.07031 2.46094 6.30469ZM3.57812 3.57812C3.42188 3.74219 3.41406 4.01562 3.57031 4.17188L4.07812 4.67969C4.24219 4.84375 4.50781 4.84375 4.67188 4.67969C4.82812 4.51562 4.82812 4.25 4.67188 4.08594L4.16406 3.57812C4.01562 3.42188 3.74219 3.41406 3.57812 3.57812Z" fill-opacity="0.85" /> </g>`,
      'ultra': `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="12.2984" height="12.7501"> <style> path {fill: #000000; } @media (prefers-color-scheme: dark) {path {fill: #ffffff; } } </style> <g transform="scale(1, -1) translate(0, -12.7501)"> <rect height="12.7501" opacity="0" width="12.2984" x="0" y="0" /> <path d="M0.0789004 2.11332C-0.1086 2.39457 0.0476504 2.80082 0.446088 2.80082L1.13359 2.80082L1.13359 2.83988C1.13359 5.14457 2.30546 5.36332 2.30546 6.52738C2.30546 7.69925 0.821088 7.918 0.821088 10.1446C0.821088 10.8477 1.03203 11.418 1.53984 12.0664C2.03984 12.6914 3.03984 12.0586 2.50859 11.3399C2.14921 10.8711 2.03203 10.5352 2.03203 10.0508C2.03203 8.61332 3.5164 8.168 3.5164 6.52738C3.5164 4.88675 2.33671 4.52738 2.33671 2.83988L2.33671 2.80082L3.02421 2.80082C3.41484 2.80082 3.58671 2.40238 3.38359 2.11332L2.13359 0.293004C1.93046-0.0273089 1.55546-0.0429339 1.33671 0.293004ZM4.2664 2.08988C4.0789 2.37113 4.23515 2.77738 4.63359 2.77738L5.32109 2.77738L5.32109 2.81644C5.32109 5.12113 6.49296 5.33988 6.49296 6.50394C6.49296 7.67582 5.00859 7.89457 5.00859 10.1211C5.00859 10.8243 5.21953 11.3946 5.72734 12.043C6.22734 12.6758 7.22734 12.0352 6.69609 11.3164C6.33671 10.8477 6.21953 10.5118 6.21953 10.0274C6.21953 8.58988 7.7039 8.15238 7.7039 6.50394C7.7039 4.86332 6.52421 4.50394 6.52421 2.81644L6.52421 2.77738L7.21171 2.77738C7.60234 2.77738 7.77421 2.37894 7.57109 2.08988L6.32109 0.269566C6.11796-0.0507464 5.74296-0.0663714 5.52421 0.269566ZM8.46171 2.06644C8.2664 2.3555 8.43046 2.76175 8.82109 2.76175L9.50859 2.76175L9.50859 2.793C9.50859 5.09769 10.6883 5.31644 10.6883 6.4805C10.6883 7.65238 9.2039 7.87113 9.2039 10.0977C9.2039 10.8008 9.40703 11.3711 9.91484 12.0196C10.4227 12.6524 11.4148 12.0118 10.8836 11.293C10.5242 10.8243 10.407 10.4883 10.407 10.0039C10.407 8.56644 11.8914 8.12894 11.8914 6.4805C11.8914 4.83988 10.7117 4.4805 10.7117 2.793L10.7117 2.76175L11.3992 2.76175C11.7898 2.76175 11.9617 2.3555 11.7664 2.06644L10.5086 0.246129C10.3055-0.0741839 9.93046-0.0898089 9.71171 0.246129Z" fill-opacity="0.85" /> </g> </svg>`,
      'wind': `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="13.0234" height="12.6172"> <style> path {fill: #000000; } @media (prefers-color-scheme: dark) {path {fill: #ffffff; } } </style> <g> <rect height="12.6172" opacity="0" width="13.0234" x="0" y="0" /> <path d="M6.30469 12.6094C9.75 12.6094 12.6172 9.75 12.6172 6.30469C12.6172 2.85938 9.74219 0 6.29688 0C2.85938 0 0 2.85938 0 6.30469C0 9.75 2.86719 12.6094 6.30469 12.6094ZM6.30469 11.4219C3.46875 11.4219 1.20312 9.14844 1.20312 6.30469C1.20312 3.46094 3.46094 1.1875 6.29688 1.1875C9.14062 1.1875 11.4219 3.46094 11.4219 6.30469C11.4219 9.14844 9.14844 11.4219 6.30469 11.4219Z" fill-opacity="0.85" /> <path d="M3.03125 5.33594C3.55469 5.17969 4.07812 5.10156 4.58594 5.10156C5.22656 5.10156 5.72656 5.20312 6.33594 5.20312C7.05469 5.20312 7.5 4.71094 7.5 4.07812C7.5 3.42188 6.99219 2.96094 6.38281 2.96094C5.94531 2.96094 5.54688 3.22656 5.375 3.58594C5.29688 3.73438 5.3125 3.95312 5.5 4.05469C5.66406 4.14062 5.875 4.09375 5.97656 3.88281C6.05469 3.74219 6.20312 3.63281 6.38281 3.63281C6.625 3.63281 6.82031 3.78906 6.82031 4.07812C6.82031 4.35938 6.64062 4.52344 6.33594 4.52344C5.75781 4.52344 5.25781 4.42188 4.58594 4.42188C3.98438 4.42188 3.375 4.53125 2.82812 4.6875C2.60938 4.74219 2.51562 4.9375 2.57812 5.10938C2.625 5.29688 2.8125 5.40625 3.03125 5.33594ZM8.64844 7.07812C9.54688 7.07812 10.2031 6.49219 10.2031 5.67969C10.2031 4.875 9.57812 4.29688 8.8125 4.29688C8.11719 4.29688 7.58594 4.77344 7.49219 5.41406C7.45312 5.63281 7.58594 5.80469 7.75781 5.82812C7.95312 5.85938 8.125 5.74219 8.17188 5.50781C8.22656 5.17969 8.48438 4.97656 8.8125 4.97656C9.21094 4.97656 9.51562 5.25 9.51562 5.67969C9.51562 6.11719 9.1875 6.39062 8.64844 6.39062C7.57031 6.39062 6.38281 5.75781 4.92188 5.75781C4.17969 5.75781 3.46875 5.88281 2.82031 6.10156C2.61719 6.17188 2.51562 6.35938 2.57812 6.53125C2.625 6.71875 2.80469 6.82812 3.03125 6.75C3.61719 6.53906 4.21875 6.4375 4.92188 6.4375C6.35938 6.4375 7.41406 7.07812 8.64844 7.07812ZM6.33594 9.64844C6.95312 9.64844 7.4375 9.19531 7.4375 8.54688C7.4375 7.60938 6.50781 7.10156 4.82812 7.10156C4.17969 7.10156 3.44531 7.22656 2.8125 7.4375C2.61719 7.51562 2.51562 7.69531 2.57812 7.85938C2.625 8.04688 2.80469 8.16406 3.03125 8.09375C3.59375 7.89062 4.19531 7.78125 4.82812 7.78125C6.13281 7.78125 6.75781 8.07812 6.75781 8.54688C6.75781 8.82812 6.57031 8.96875 6.33594 8.96875C6.09375 8.96875 5.97656 8.82812 5.92969 8.55469C5.89844 8.38281 5.76562 8.21094 5.54688 8.23438C5.30469 8.25 5.21094 8.46094 5.24219 8.65625C5.3125 9.19531 5.71875 9.64844 6.33594 9.64844Z" fill-opacity="0.85" /> </g> </svg>`,
      'wdir': `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="15.2344" height="12.8516"> <style> path {fill: #000000; } @media (prefers-color-scheme: dark) {path {fill: #ffffff; } } </style> <g> <rect height="12.8516" opacity="0" width="15.2344" x="0" y="0" /> <path d="M7.41406 11.9531C9.91406 11.9531 11.9531 9.92969 11.9531 7.41406C11.9531 4.90625 9.91406 2.89062 7.41406 2.89062C4.91406 2.89062 2.88281 4.90625 2.88281 7.41406C2.88281 9.9375 4.91406 11.9531 7.41406 11.9531ZM7.41406 4.02344C9.28906 4.02344 10.8203 5.54688 10.8203 7.41406C10.8203 9.29688 9.28906 10.8125 7.41406 10.8125C5.53906 10.8125 4.01562 9.29688 4.01562 7.41406C4.01562 5.54688 5.53906 4.02344 7.41406 4.02344ZM7.41406 8C7.67969 8.00781 7.92969 7.76562 7.92969 7.48438L7.92969 3.95312L6.89844 3.95312L6.89844 7.46875C6.89844 7.77344 7.10938 7.98438 7.41406 8Z" fill="#ffffff" fill-opacity="0.85" /> <path d="M2.64062 12.8516C3.02344 12.8516 3.32812 12.5469 3.32812 12.1641C3.32812 11.7812 3.02344 11.4766 2.64062 11.4766C2.25781 11.4766 1.95312 11.7812 1.95312 12.1641C1.95312 12.5469 2.25781 12.8516 2.64062 12.8516ZM0.6875 8.10156C1.07031 8.10156 1.375 7.79688 1.375 7.41406C1.375 7.03125 1.07031 6.72656 0.6875 6.72656C0.304688 6.72656 0 7.03125 0 7.41406C0 7.79688 0.304688 8.10156 0.6875 8.10156ZM2.64062 3.36719C3.02344 3.36719 3.32812 3.0625 3.32812 2.6875C3.32812 2.30469 3.02344 2 2.64062 2C2.25781 2 1.95312 2.30469 1.95312 2.6875C1.95312 3.0625 2.25781 3.36719 2.64062 3.36719ZM7.41406 1.375C7.79688 1.375 8.10156 1.07031 8.10156 0.6875C8.10156 0.304688 7.79688 0 7.41406 0C7.03125 0 6.72656 0.304688 6.72656 0.6875C6.72656 1.07031 7.03125 1.375 7.41406 1.375ZM12.1953 3.36719C12.5781 3.36719 12.8828 3.0625 12.8828 2.6875C12.8828 2.30469 12.5781 2 12.1953 2C11.8125 2 11.5078 2.30469 11.5078 2.6875C11.5078 3.0625 11.8125 3.36719 12.1953 3.36719ZM14.1484 8.10156C14.5234 8.10156 14.8281 7.79688 14.8281 7.41406C14.8281 7.03125 14.5234 6.72656 14.1484 6.72656C13.7656 6.72656 13.4609 7.03125 13.4609 7.41406C13.4609 7.79688 13.7656 8.10156 14.1484 8.10156ZM12.1953 12.8516C12.5781 12.8516 12.8828 12.5469 12.8828 12.1641C12.8828 11.7812 12.5781 11.4766 12.1953 11.4766C11.8125 11.4766 11.5078 11.7812 11.5078 12.1641C11.5078 12.5469 11.8125 12.8516 12.1953 12.8516Z" fill="#ffffff" fill-opacity="0.85" /> </g> </svg>`
    }

    class TempestReading extends LitElement {

      static styles = css`
svg {
  padding-right: 3px;
}

.reading-box {
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 140px;
  min-height: 140px;
  height: 140px;     /* Set the height of the boxes */
  width: 140px;      /* Set the width of the boxes */
  border: 1px solid white;
  border-radius: 6%;
}

.reading-box p {
  text-align: center;
  font-size: 1.5rem;
  font-family: 'Space Mono', monospace
}`
      
      static get properties() {
        return {
          id: { type: String },
          title: { type: String },
          reading: { type: String },
        };
      }

      readingValue() {
        if (this.reading === "‚åõÔ∏è") return html`‚åõÔ∏è`

        if (this.id === "temp") {
          const tempUnits = localStorage.getItem("tempestwx:Temperature Units") ?? "Fahrenheit"
          const symbol = tempUnits == "Fahrenheit" ? "F" : "C"
          let value = +this.reading
          value = tempUnits == "Fahrenheit" ? value * 1.8 + 32 : value
          value = value.toFixed(1)
          return html`${value}<span style='vertical-align: super; font-size: 9pt;'>¬∞${symbol}</span>`
        } else if (this.id === "press") {
          const pressureUnits = localStorage.getItem("tempestwx:Pressure Units") ?? "mb"
          const symbol = pressureUnits == "mb" ? "mb" : "inHg"
          let value = +this.reading
          value = pressureUnits === "inHg" ? (value * 0.02953).toFixed(2) : value.toLocaleString()
          return html`${value}<span style='vertical-align: super; font-size: 9pt;'>${symbol}</span>`
        } else if (this.id === "wind") {
          const windUnits = localStorage.getItem("tempestwx:Wind Units") ?? "mph"
          const symbol = windUnits == "mph" ? "mph" : "kph"
          let value = +this.reading
          value = windUnits == "mph" ? (value * 2.236936).toFixed(1) : value.toFixed(1)
          return html`${value}<span style='vertical-align: super; font-size: 9pt;'>${symbol}</span>`
        } else if (this.id === "insol") {
          return html`${this.reading}<span style='font-size:9pt'> W/m^2</span>`
        }
        return unsafeHTML(this.reading)
      }

      render() {
        return html`
        <div class="reading-box">
          <div>
            <h4>
              ${unsafeSVG(svgtrans[this.id])}
              ${this.title}
            </h4>
            <p>${this.readingValue()}</p>
          </div>
        </div>
        `;
      }
    }
    customElements.define('tempest-reading', TempestReading);

  </script>

</body>

</html>